<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug API - TechHelp</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #0d1117;
            color: #c9d1d9;
            padding: 20px;
        }
        .container { max-width: 1200px; margin: 0 auto; }
        h1 { margin-bottom: 20px; color: #58a6ff; }
        .btn {
            background: #238636;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            cursor: pointer;
            border-radius: 6px;
            font-size: 14px;
        }
        .btn:hover { background: #2ea043; }
        .section {
            background: #161b22;
            border: 1px solid #30363d;
            border-radius: 6px;
            padding: 20px;
            margin: 20px 0;
        }
        pre {
            background: #0d1117;
            border: 1px solid #30363d;
            border-radius: 6px;
            padding: 15px;
            overflow-x: auto;
            font-size: 13px;
        }
        .error { color: #f85149; }
        .success { color: #3fb950; }
        .loading { opacity: 0.5; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç Debug API - TechHelp Dashboard</h1>
        
        <div class="section">
            <h2>Testes R√°pidos</h2>
            <button class="btn" onclick="testEndpoint('/')">Test /</button>
            <button class="btn" onclick="testEndpoint('/api')">Test /api</button>
            <button class="btn" onclick="testEndpoint('/api/health')">Test /api/health</button>
            <button class="btn" onclick="testEndpoint('/api/test')">Test /api/test</button>
            <button class="btn" onclick="testEndpoint('/api/chamados')">Test /api/chamados</button>
        </div>

        <div class="section">
            <h2>Resultado</h2>
            <div id="status"></div>
            <pre id="result">Clique em um bot√£o para testar...</pre>
        </div>

        <div class="section">
            <h2>Info do Navegador</h2>
            <pre id="browserInfo"></pre>
        </div>
    </div>

    <script>
        // Mostrar info do browser
        document.getElementById('browserInfo').textContent = JSON.stringify({
            userAgent: navigator.userAgent,
            hostname: window.location.hostname,
            protocol: window.location.protocol,
            baseURL: window.location.origin
        }, null, 2);

        async function testEndpoint(path) {
            const statusEl = document.getElementById('status');
            const resultEl = document.getElementById('result');
            
            statusEl.innerHTML = '<span class="loading">‚è≥ Carregando...</span>';
            resultEl.textContent = 'Aguarde...';
            
            const url = path;
            console.log('Testando:', url);
            
            try {
                const start = Date.now();
                const response = await fetch(url);
                const elapsed = Date.now() - start;
                
                const contentType = response.headers.get('content-type');
                let data;
                
                if (contentType && contentType.includes('application/json')) {
                    data = await response.json();
                } else {
                    data = await response.text();
                }
                
                statusEl.innerHTML = response.ok 
                    ? `<span class="success">‚úÖ ${response.status} ${response.statusText} (${elapsed}ms)</span>`
                    : `<span class="error">‚ùå ${response.status} ${response.statusText} (${elapsed}ms)</span>`;
                
                resultEl.textContent = typeof data === 'string' 
                    ? data 
                    : JSON.stringify(data, null, 2);
                
                console.log('Resposta:', data);
                
            } catch (error) {
                statusEl.innerHTML = `<span class="error">‚ùå Erro: ${error.message}</span>`;
                resultEl.textContent = error.stack;
                console.error('Erro:', error);
            }
        }
    </script>
</body>
</html>
